[{"id":"image_gen","user_id":"33c6d9ce-4866-4166-a1d3-4b2ca8c6bc64","name":"Image_Gen","content":"\"\"\"\ntitle: Image Gen\nauthor: open-webui\nauthor_url: https://github.com/open-webui\nfunding_url: https://github.com/open-webui\nversion: 0.1\nrequired_open_webui_version: 0.5.3\n\"\"\"\n\nimport os\nimport requests\nfrom datetime import datetime\nfrom typing import Callable\nfrom fastapi import Request\n\nfrom open_webui.routers.images import image_generations, GenerateImageForm\nfrom open_webui.models.users import Users\n\n\nclass Tools:\n    def __init__(self):\n        pass\n\n    async def generate_image(\n        self, prompt: str, __request__: Request, __user__: dict, __event_emitter__=None\n    ) -> str:\n        \"\"\"\n        Generate an image given a prompt\n\n        :param prompt: prompt to use for image generation\n        \"\"\"\n\n        await __event_emitter__(\n            {\n                \"type\": \"status\",\n                \"data\": {\"description\": \"Generating an image\", \"done\": False},\n            }\n        )\n\n        try:\n            images = await image_generations(\n                request=__request__,\n                form_data=GenerateImageForm(**{\"prompt\": prompt}),\n                user=Users.get_user_by_id(__user__[\"id\"]),\n            )\n            await __event_emitter__(\n                {\n                    \"type\": \"status\",\n                    \"data\": {\"description\": \"Generated an image\", \"done\": True},\n                }\n            )\n\n            for image in images:\n                await __event_emitter__(\n                    {\n                        \"type\": \"message\",\n                        \"data\": {\"content\": f\"![Generated Image]({image['url']})\"},\n                    }\n                )\n\n            return f\"Notify the user that the image has been successfully generated\"\n\n        except Exception as e:\n            await __event_emitter__(\n                {\n                    \"type\": \"status\",\n                    \"data\": {\"description\": f\"An error occured: {e}\", \"done\": True},\n                }\n            )\n\n            return f\"Tell the user: {e}\"\n","specs":[{"name":"generate_image","description":"Generate an image given a prompt","parameters":{"properties":{"prompt":{"description":"prompt to use for image generation","type":"string"}},"required":["prompt"],"type":"object"}}],"meta":{"description":"This tool generates images based on text prompts using the built-in methods of Open WebUI. Setup your image generation engine in Admin Settings > Images","manifest":{"title":"Image Gen","author":"open-webui","author_url":"https://github.com/open-webui","funding_url":"https://github.com/open-webui","version":"0.1","required_open_webui_version":"0.5.3"}},"access_control":null,"updated_at":1740417737,"created_at":1737723219}]